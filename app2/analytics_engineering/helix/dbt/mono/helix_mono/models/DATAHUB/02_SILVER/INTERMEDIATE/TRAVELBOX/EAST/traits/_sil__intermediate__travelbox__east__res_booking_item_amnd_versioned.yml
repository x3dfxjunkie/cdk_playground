version: 2

models:
  - name: sil__intermediate__travelbox__east__res_booking_item_amnd_versioned
    description: '{{ doc("sil__intermediate__travelbox__east__res_booking_item_amnd_versioned") }}'

    meta:
      environment_wh:
        - env: LOCAL
          wh: HOTEL_LODGING_LATEST_WH_S
        - env: LATEST
          wh: HOTEL_LODGING_LATEST_WH_S
        - env: EPHEMERAL_PR
          wh: PR_SMALL_WH
        - env: STAGE
          wh: HOTEL_LODGING_STAGE_WH_M
        - env: PROD
          wh: HOTEL_LODGING_PROD_WH_M

    config:
      tags:
        - layer=silver_intermediate
        - sub_layer=silver_intermediate_versioned
        - active=LATEST
        - active=STAGE
        - active=LOAD
        - active=PROD

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - data_amnd_no
            - data_booking_id
            - data_item_no
            - data_product_code
            - metadata_checksum

    columns:
      - name: data_booking_id
        description: "The system generated id of the booking | example: 27517669"
        tags: ['column_designation=primary_key']
        tests:
          - not_null

      - name: data_product_code
        description: "Deprecated | example: GEN"
        tags: ['column_designation=primary_key']
        tests:
          - not_null

      - name: data_item_no
        description: "Deprecated | example: 1"
        tags: ['column_designation=primary_key']
        tests:
          - not_null

      - name: data_amnd_no
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
A system generated id to uniquely identify a booking amendment.  | example: 2"
        tags: ['column_designation=primary_key']
        tests:
          - not_null

      - name: data_amnd_date
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
The date booking item is amended. | example: 2019-12-14 21:06:02"

      - name: data_amnd_user
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
The TravelBox id of the user who amended the booking. | example: 17899"

      - name: data_amnd_cost
        description: "Cost applied for the booking item amendment | example: 0.0"

      - name: data_notes
        description: "Notes for the tax invoice | example:"

      - name: data_amnd_notification_sent
        description: "Deprecated | example: 0"

      - name: data_amnd_notification_sent_date
        description: "Deprecated | example: 2000-07-29 08:50:49"

      - name: data_amnd_notification_sent_user
        description: "Deprecated | example: 259"

      - name: data_amnd_notification_sent_method
        description: "Deprecated | example: BfPdVeqbmqWcxKfYDJOB"

      - name: data_amnd_conf_received
        description: "Deprecated | example: 0"

      - name: data_amnd_conf_received_date
        description: "Deprecated | example: 2010-07-24 00:54:45"

      - name: data_amnd_conf_received_user
        description: "Deprecated | example: 127"

      - name: data_amnd_conf_received_method
        description: "Deprecated | example: aOYdGEJgTZXaRbVDBALb"

      - name: data_amnd_reason_id
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
The TravelBox id of the reason for amending the booking | example: 14"

      - name: data_amnd_price
        description: "Price applied for the booking item amendment | example: 0.0"

      - name: data_cost_in_contract
        description: "Cost of the booking item in contract currency | example: 0.0"

      - name: data_amnd_charge_commissionable
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
Whether the charge is commissionable or not. | example: 0"

      - name: data_amnd_adt_cost
        description: "The amendment cost of adults of the booking item | example: 0.0"

      - name: data_amnd_chd_cost
        description: "The amendment cost of children of the booking item | example: 0.0"

      - name: data_amnd_inf_cost
        description: "Amendment cost of infants of the booking item | example: 0.0"

      - name: data_cause_id
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
The TravelBox id of the cause for booking amendment | example: 961"

      - name: data_charge_type
        description: "P = PERCENTAGE, A = AMOUNT | example: FIXED"

      - name: data_reason_type
        description: "Booking amendment charges: Reservation Manager &gt; View Booking Amendment/Cancellation Charges._x000D_
The amendment reason type. Whether it is amendment or cancellation. | example: A"

      - name: data_amnd_adt_price
        description: "The amendment price of adults of the booking item | example: 0.0"

      - name: data_amnd_chd_price
        description: "The amendment price of children of the booking item | example: 0.0"

      - name: data_amnd_inf_price
        description: "Amendment price of infants of the booking item | example: 0.0"

      - name: data_last_modified_time
        description: "The time at which the last modification has done. | example: 2008-05-15 07:27:11"

      - name: metadata_checksum
        description: "Metadata Checksum"
        tests:
          - not_null

      - name: metadata_timestamp
        description: "Timestamp of when the record was sent to the stream | example: 2023-08-11 14:38:01.378618"
        tests:
          - not_null

      - name: metadata_record_type
        description: "Type of record | example: data"

      - name: metadata_operation
        description: "Type of operation [insert, delete, update] | example: update"

      - name: metadata_partition_key_type
        description: "Partition key | example: schema-table"

      - name: metadata_schema_name
        description: "Name of schema | example: SFLNSMD"

      - name: metadata_table_name
        description: "Name of table | example: AP_LVL_N_ENTTL_FISCAL_DT"

      - name: metadata_transaction_id
        description: "Unique Transaction Identifier | example: 59558768559209"

      - name: metadata_transaction_record_id
        description: "Transaction Record ID | example: 70974432245344"

      - name: metadata_prev_transaction_id
        description: "Previous Transaction ID | example: 70974432245344"

      - name: metadata_prev_transaction_record_id
        description: "Previous Transaction Record ID | example: 70974432245344"

      - name: metadata_commit_timestamp
        description: "Commit Timestamp | example: 2023-03-29T15:30:19.109655Z"

      - name: metadata_stream_position
        description: "Stream Position | example:"

      - name: metadata_insert_datetime
        description: "This is the current timestamp in UTC when the record is inserted"
        tests:
          - not_null

      - name: metadata_batch_user
        description: "Batch user. Default value will be dbt"
        tests:
          - not_null

      - name: metadata_version_start_datetime
        description: "Version start datetime"
        tests:
          - not_null

      - name: metadata_version_end_datetime
        description: "Version end datetime"
        tests:
          - not_null

      - name: landing_id
        description: ""

      - name: landing_file_name
        description: ""

      - name: landing_file_row_number
        description: ""

      - name: landing_file_last_modified
        description: ""

      - name: landing_timestamp
        description: ""

      - name: landing_cloudevent_id
        description: ""

      - name: landing_cloudevent_specversion
        description: ""

      - name: landing_cloudevent_time
        description: ""

      - name: landing_cloudevent_source
        description: ""

      - name: landing_cloudevent_subject
        description: ""

      - name: landing_cloudevent_stream
        description: ""

      - name: landing_cloudevent_type
        description: ""

      - name: landing_cloudevent_dataschema
        description: ""

      - name: landing_cloudevent_traceparent
        description: ""

      - name: landing_cloudevent_tracestate
        description: ""

      - name: landing_cloudevent_check_sum
        description: ""

      - name: landing_cloudevent_router_database
        description: ""

      - name: landing_cloudevent_router_schema
        description: ""

      - name: landing_cloudevent_router_table
        description: ""

      - name: landing_cloudevent_validated
        description: ""

      - name: landing_cloudevent_data_contract_version
        description: ""

      - name: landing_cloudevent_datacontenttype
        description: ""

      - name: landing_cloudevent_exception_error
        description: ""