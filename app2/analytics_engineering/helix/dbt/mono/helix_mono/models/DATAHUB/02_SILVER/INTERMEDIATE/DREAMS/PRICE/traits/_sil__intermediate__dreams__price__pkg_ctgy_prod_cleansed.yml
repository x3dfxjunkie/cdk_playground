version: 2

models:
  - name: sil__intermediate__dreams__price__pkg_ctgy_prod_cleansed
    description: '{{ doc("sil__intermediate__dreams__price__pkg_ctgy_prod_cleansed") }}'

    meta:
      environment_wh:
        - env: LOCAL
          wh: HOTEL_LODGING_LATEST_WH_S
        - env: LATEST
          wh: HOTEL_LODGING_LATEST_WH_S
        - env: EPHEMERAL_PR
          wh: PR_SMALL_WH
        - env: STAGE
          wh: HOTEL_LODGING_STAGE_WH_M
        - env: PROD
          wh: HOTEL_LODGING_PROD_WH_M

    config:
      tags:
        - layer=silver_intermediate
        - sub_layer=silver_intermediate_cleansed
        - active=LATEST
        - active=STAGE
        - active=LOAD
        - active=PROD

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - data_pkg_ctgy_prod_id
            - metadata_checksum

    columns:
      - name: data_glb_sqnc_rowid
        description: ""
        meta:
          checksum: True

      - name: data_cmd
        description: ""
        meta:
          checksum: True

      - name: data_prttn_dt
        description: ""
        meta:
          checksum: True

      - name: data_scn
        description: ""
        meta:
          checksum: True

      - name: data_edtn_nm
        description: ""
        meta:
          checksum: True

      - name: data_etl_dts_dpp
        description: ""
        meta:
          checksum: True

      - name: data_dc_dts
        description: ""
        meta:
          checksum: True

      - name: data_pkg_ctgy_prod_id
        description: ""
        tags: ['column_designation=primary_key']
        tests:
          - not_null

      - name: data_pkg_prod_cls_id
        description: ""
        meta:
          checksum: True

      - name: data_price_grid_id
        description: ""
        meta:
          checksum: True

      - name: data_cmpnt_prod_id
        description: ""
        meta:
          checksum: True

      - name: data_pkg_ctgy_prod_sell_in
        description: ""
        meta:
          checksum: True

      - name: data_create_dts
        description: ""
        meta:
          checksum: True

      - name: data_updt_dts
        description: ""

      - name: data_create_usr_id_cd
        description: ""
        meta:
          checksum: True

      - name: data_updt_usr_id_cd
        description: ""
        meta:
          checksum: True

      - name: data_jdo_seq_nb
        description: ""
        meta:
          checksum: True

      - name: data_prge_dts
        description: ""
        meta:
          checksum: True

      - name: min_metadata_timestamp
        description: "The Minimum Metadata Timestamp field is used for updating the version end date of the active record in the target table"
        tests:
          - not_null

      - name: metadata_checksum
        description: "Metadata Checksum"
        tests:
          - not_null

      - name: metadata_timestamp
        description: "Timestamp for when the record was sent in the stream | example: 2023-03-29T15:30:19.109655Z"
        tests:
          - not_null

      - name: metadata_record_type
        description: "data | example: 2023-03-29T15:30:15Z"

      - name: metadata_operation
        description: ""

      - name: metadata_partition_key_type
        description: ""

      - name: metadata_schema_name
        description: "Name of the schema in snowflake | example: res_mgmt"

      - name: metadata_table_name
        description: "name of the table in snowflake | example: tc"

      - name: metadata_transaction_id
        description: "untque ID for the stream record | example: 70974432245344"

      - name: metadata_insert_datetime
        description: "This is the current timestamp in UTC when the record is inserted"
        tests:
          - not_null

      - name: metadata_batch_user
        description: "Batch user. Default value will be dbt"
        tests:
          - not_null

      - name: landing_id
        description: ""

      - name: landing_file_name
        description: ""

      - name: landing_file_row_number
        description: ""

      - name: landing_file_last_modified
        description: ""

      - name: landing_timestamp
        description: ""